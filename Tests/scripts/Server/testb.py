
import numpy as np
from PIL import Image
import sys

#message = "306,256,256,256,256,256,256,256,305,256,256,256,256,256,256,256,311,254,254,256,256,256,256,256,317,235,269,255,256,256,256,256,367,257,254,256,256,256,256,256,351,256,261,256,256,256,256,256,356,257,256,256,256,256,256,256,350,259,256,256,256,256,256,256,334,266,256,256,256,256,256,256,317,260,256,256,256,256,256,256,317,250,258,256,256,256,256,256,351,242,253,255,256,256,256,256,360,259,257,256,256,256,256,256,364,253,256,256,256,256,256,256,369,256,256,256,256,256,256,256,360,273,246,257,256,256,256,256,234,256,256,256,256,256,256,256,238,256,256,256,256,256,256,256,239,255,258,256,256,256,256,256,239,271,256,252,256,256,256,256,256,254,255,255,256,256,256,256,265,256,255,256,256,256,256,256,261,257,256,256,256,256,256,256,244,263,256,256,256,256,256,256,226,259,257,256,256,256,256,256,233,252,256,256,256,256,256,256,245,252,257,256,256,256,256,256,261,254,255,256,256,256,256,256,264,257,255,256,256,256,256,256,256,258,256,256,256,256,256,256,257,256,256,256,256,256,256,256,266,248,259,256,256,256,256,256,259,256,256,256,256,256,256,256,257,256,256,256,256,256,256,256,254,258,256,256,256,256,256,256,256,254,250,256,256,256,256,256,256,254,256,256,256,256,256,256,258,256,256,256,256,256,256,256,256,259,256,256,256,256,256,256,251,256,256,256,256,256,256,256,253,254,257,256,256,256,256,256,260,256,256,256,256,256,256,256,255,258,256,256,256,256,256,256,256,253,256,256,256,256,256,256,260,256,256,256,256,256,256,256,258,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,260,250,257,256,256,256,256,256,256,256,256,256,256,256,256,256,257,256,256,256,256,256,256,256,258,256,256,256,256,256,256,256,256,256,257,256,256,256,256,256,255,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,254,256,256,256,256,256,256,256,255,256,256,256,256,256,256,256,258,256,256,256,256,256,256,256,259,256,256,256,256,256,256,256,256,258,256,256,256,256,256,256,248,255,256,256,256,256,256,256,256,256,256,256,256,256,256,256,258,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,254,256,257,256,256,256,256,256,255,255,256,256,256,256,265,256,255,256,256,256,256,256,261,257,256,256,256,256,256,256,244,263,256,256,256,256,256,256,226,259,257,256,256,256,256,256,233,252,256,256,256,256,256,256,245,252,257,256,256,256,256,256,261,254,255,256,256,256,256,256,264,257,255,256,256,256,256,256,256,258,256,256,256,256,256,256,257,256,256,256,256,256,256,256,266,248,259,256,256,256,256,256,259,256,256,256,256,256,256,256,257,256,256,256,256,256,256,256,254,258,256,256,256,256,256,256,256,254,250,256,256,256,256,256,256,254,256,256,256,256,256,256,258,256,256,256,256,256,256,256,256,259,256,256,256,256,256,256,251,256,256,256,256,256,256,256,253,254,257,256,256,256,256,256,260,256,256,256,256,256,256,256,255,258,256,256,256,256,256,256,256,253,256,256,256,256,255,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,257,256,256,256,256,256,256,256,258,256,256,256,256,256,256,256,256,257,256,256,256,256,256,256,254,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,255,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,255,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,323,256,256,256,256,256,256,256,315,261,256,256,256,256,256,256,306,255,259,255,256,256,256,256,359,236,243,254,256,256,256,256,360,266,254,256,256,256,256,256,335,260,258,256,256,256,256,256,346,247,255,256,256,256,256,256,354,256,257,256,256,256,256,256,365,252,256,256,256,256,256,256,368,258,256,256,256,256,256,256,360,258,257,256,256,256,256,256,361,252,256,256,256,256,256,256,366,256,255,256,256,256,256,256,363,259,256,256,256,256,256,256,363,252,257,256,256,256,256,256,351,270,250,260,256,256,256,256,258,256,256,256,256,256,256,256,268,253,256,256,256,256,256,256,257,269,252,257,256,256,256,256,246,243,252,256,256,256,256,256,261,253,255,256,256,256,256,256,258,255,257,256,256,256,256,256,265,258,254,256,256,256,256,256,256,252,257,256,256,256,256,256,259,258,256,256,256,256,256,256,250,258,255,256,256,256,256,256,241,256,256,256,256,256,256,256,255,252,256,256,256,256,256,256,260,254,257,256,256,256,256,256,267,256,256,256,256,256,256,256,262,259,256,256,256,256,256,256,266,260,253,256,256,256,256,256,252,258,256,256,256,256,256,256,249,254,257,256,256,256,256,256,264,255,254,256,256,256,256,256,253,254,256,256,256,256,256,256,256,255,256,256,256,256,256,256,256,256,256,256,256,256,256,256,255,258,256,256,256,256,256,256,259,255,254,256,256,256,256,256,255,257,256,256,256,256,256,256,252,258,256,256,256,256,256,256,249,256,256,256,256,256,256,256,250,256,256,256,256,256,256,256,250,256,256,256,256,256,256,256,254,252,256,256,256,256,256,256,260,257,256,256,256,256,256,256,257,256,256,256,256,256,256,256,261,256,256,256,256,256,256,256,257,258,256,256,256,256,256,256,256,254,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,255,256,256,256,256,256,256,256,257,254,256,256,256,256,256,256,262,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,257,256,256,256,256,256,256,256,255,257,256,256,256,256,256,256,255,256,256,256,256,256,258,255,257,256,256,256,256,256,265,258,254,256,256,256,256,256,256,252,257,256,256,256,256,256,259,258,256,256,256,256,256,256,250,258,255,256,256,256,256,256,241,256,256,256,256,256,256,256,255,252,256,256,256,256,256,256,260,254,257,256,256,256,256,256,267,256,256,256,256,256,256,256,262,259,256,256,256,256,256,256,266,260,253,256,256,256,256,256,252,258,256,256,256,256,256,256,249,254,257,256,256,256,256,256,264,255,254,256,256,256,256,256,253,254,256,256,256,256,256,256,256,255,256,256,256,256,256,256,256,256,256,256,256,256,256,256,255,258,256,256,256,256,256,256,259,255,254,256,256,256,256,256,255,257,256,256,256,256,256,256,252,258,256,256,256,256,256,256,249,256,256,256,256,256,256,256,250,256,256,256,256,256,256,256,256,256,256,256,256,256,257,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,255,256,256,256,256,256,256,256,254,256,256,256,256,256,256,256,255,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,309,256,256,256,256,256,256,256,316,250,255,256,256,256,256,256,342,241,257,256,256,256,256,256,360,260,253,256,256,256,256,256,350,256,257,256,256,256,256,256,334,269,258,256,256,256,256,256,322,253,257,256,256,256,256,256,347,242,256,256,256,256,256,256,363,256,256,256,256,256,256,256,364,256,255,256,256,256,256,256,357,260,256,256,256,256,256,256,343,260,257,256,256,256,256,256,347,251,256,256,256,256,256,256,361,252,255,256,256,256,256,256,359,264,252,256,256,256,256,256,338,256,254,257,256,256,256,256,236,256,256,256,256,256,256,256,238,255,256,256,256,256,256,256,248,251,258,256,256,256,256,256,263,255,256,256,256,256,256,256,256,259,256,256,256,256,256,256,256,256,255,256,256,256,256,256,260,253,256,256,256,256,256,256,268,257,254,256,256,256,256,256,256,256,258,256,256,256,256,256,257,259,255,256,256,256,256,256,243,257,257,256,256,256,256,256,241,256,256,256,256,256,256,256,237,257,256,256,256,256,256,256,245,252,256,256,256,256,256,256,259,249,256,257,256,256,256,256,256,256,258,256,256,256,256,256,259,256,256,256,256,256,256,256,256,258,256,256,256,256,256,256,251,255,257,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,255,256,256,256,256,256,256,257,256,256,256,256,256,256,256,255,259,256,256,256,256,256,256,256,253,256,256,256,256,256,256,254,258,256,256,256,256,256,256,257,253,256,256,256,256,256,256,263,256,256,256,256,256,256,256,261,256,256,256,256,256,256,256,259,258,256,256,256,256,256,256,256,254,256,256,256,256,256,256,257,257,256,256,256,256,256,256,255,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,255,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,260,256,256,256,256,256,256,256,257,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,255,256,256,256,256,256,260,253,256,256,256,256,256,256,268,257,254,256,256,256,256,256,256,256,258,256,256,256,256,256,257,259,255,256,256,256,256,256,243,257,257,256,256,256,256,256,241,256,256,256,256,256,256,256,237,257,256,256,256,256,256,256,245,252,256,256,256,256,256,256,259,249,256,257,256,256,256,256,256,256,258,256,256,256,256,256,259,256,256,256,256,256,256,256,256,258,256,256,256,256,256,256,251,255,257,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,255,256,256,256,256,256,256,257,256,256,256,256,256,256,256,255,259,256,256,256,256,256,256,256,253,256,256,256,256,256,256,254,258,256,256,256,256,256,256,257,253,256,256,256,256,256,256,263,256,256,256,256,256,257,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,356,261,257,256,256,256,256,256,344,258,257,256,256,256,256,256,353,250,254,256,256,256,256,256,351,256,260,256,256,256,256,256,356,259,255,256,256,256,256,256,340,264,260,256,256,256,256,256,334,258,255,256,256,256,256,256,330,255,256,256,256,256,256,256,337,251,256,256,256,256,256,256,345,256,256,256,256,256,256,256,348,255,256,256,256,256,256,256,359,248,256,256,256,256,256,256,369,258,254,256,256,256,256,256,351,265,256,256,256,256,256,256,341,253,257,256,256,256,256,256,344,254,255,257,256,256,256,256,243,257,256,256,256,256,256,256,250,253,255,256,256,256,256,256,251,256,258,256,256,256,256,256,254,259,257,256,256,256,256,256,256,253,256,256,256,256,256,256,251,258,256,256,256,256,256,256,242,256,257,256,256,256,256,256,253,253,256,256,256,256,256,256,270,251,255,256,256,256,256,256,268,259,256,256,256,256,256,256,267,253,256,256,256,256,256,256,273,256,256,256,256,256,256,256,273,254,257,256,256,256,256,256,281,257,255,256,256,256,256,256,266,263,255,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,255,256,256,256,256,256,256,256,257,257,256,256,256,256,256,256,257,256,255,256,256,256,256,256,255,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,257,255,256,256,256,256,256,256,260,256,255,256,256,256,256,256,255,256,256,256,256,256,256,256,257,255,256,256,256,256,256,256,252,259,256,256,256,256,256,256,247,256,256,256,256,256,256,256,256,252,255,256,256,256,256,256,257,258,256,256,256,256,256,256,255,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,255,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,257,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,259,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,251,258,256,256,256,256,256,256,242,256,257,256,256,256,256,256,253,253,256,256,256,256,256,256,270,251,255,256,256,256,256,256,268,259,256,256,256,256,256,256,267,253,256,256,256,256,256,256,273,256,256,256,256,256,256,256,273,254,257,256,256,256,256,256,281,257,255,256,256,256,256,256,266,263,255,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,255,256,256,256,256,256,256,256,257,257,256,256,256,256,256,256,257,256,255,256,256,256,256,256,255,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,257,255,256,256,256,256,256,256,260,256,255,256,256,256,256,256,255,256,256,256,256,256,256,256,257,255,256,256,256,256,256,256,252,259,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,"
def test(message):
    X = 128
    Y = 128
    np.set_printoptions(threshold=sys.maxsize)
    # these are numbers of blocks, euqals to the size / 8
    num_blocks_xy = 16

    pixels = message.split(',')
    print(len(pixels))

    T = np.array([[0.3536, 0.3536, 0.3536, 0.3536, 0.3536, 0.3536, 0.3536, 0.3536],
                  [0.4904, 0.4157, 0.2778, 0.0975, -0.0975, -0.2778, -0.4157, -0.4904],
                  [0.4619, 0.1913, -0.1913, -0.4619, -0.4619, -0.1913, 0.1913, 0.4619],
                  [0.4157, -0.0975, -0.4904, -0.2778, 0.2778, 0.4904, 0.0975, -0.4157],
                  [0.3536, -0.3536, -0.3536, 0.3536, 0.3536, -0.3536, -0.3536, 0.3536],
                  [0.2778, -0.4904, 0.0975, 0.4157, -0.4157, -0.0975, 0.4904, -0.2778],
                  [0.1913, -0.4619, 0.4619, -0.1913, -0.1913, 0.4619, -0.4619, 0.1913],
                  [0.0975, -0.2778, 0.4157, -0.4904, 0.4904, -0.4157, 0.2778, -0.0975]])

    apple = np.zeros((X, Y))

    # pixels = message.split(",")
    # index = 1

    quant = np.array([[16, 11, 10, 16, 24, 40, 51, 61],
                      [12, 12, 14, 19, 26, 58, 60, 55],
                      [14, 13, 16, 24, 40, 57, 69, 56],
                      [14, 17, 22, 29, 51, 87, 80, 62],
                      [18, 22, 37, 56, 68, 109, 103, 77],
                      [24, 35, 55, 64, 81, 104, 113, 92],
                      [49, 64, 78, 87, 103, 121, 120, 101],
                      [72, 92, 95, 98, 112, 100, 103, 99]
                      ])
    index = 0
    # for i in range(128):
    #     for j in range(128):
    #         k = int(i % 8)
    #         m = int(j % 8)
    #         apple[i, j] = (int(pixels[index]) - 256) * quant[k, m]
    #         index = index+1

    for i in range(num_blocks_xy):
        for j in range(num_blocks_xy):
            temp = np.zeros((8, 8))
            for k in range(4):
                for l in range(k):
                    m = k - l -1
                    temp[l,m] = (int(pixels[index]) - 256) * quant[l,m]
                    index = index + 1
            apple[i * 8: i * 8 + 8, j * 8: j * 8 + 8] = temp
    decompressed = np.zeros((X, Y))
    for bx in range(num_blocks_xy):
        for by in range(num_blocks_xy):
            R = apple[bx * 8: bx * 8 + 8, by * 8: by * 8 + 8]
            result_R = np.round(T.transpose() @ R @ T)
            decompressed[bx * 8: bx * 8 + 8, by * 8: by * 8 + 8] = result_R

    print(decompressed)

    img = Image.fromarray(np.uint8(decompressed)).convert()
    img.show()